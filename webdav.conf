<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/webdav

    # Public WebDAV Directory
    Alias /public /var/www/webdav/public
    <Directory /var/www/webdav/public>
        DAV On
        Options Indexes FollowSymLinks
        AllowOverride None

        # Allow WebDAV methods (PUT, DELETE, MKCOL, etc.)
        <LimitExcept GET POST>
            Require all granted
        </LimitExcept>

        # Logs for error and access
        ErrorLog /dev/stdout
        CustomLog /dev/stdout combined

        # Allow write access to user and group
        <IfModule mod_dav.c>
            Dav On
            DavDepthInfinity on
        </IfModule>
    </Directory>

    # Restricted WebDAV Directory
    Alias /restricted /var/www/webdav/restricted
    <Directory /var/www/webdav/restricted>
        DAV On
        Options Indexes FollowSymLinks
        AllowOverride None

        # Authentication (Digest Auth for better security than Basic)
        AuthType Digest
        AuthName "Restricted"
        AuthUserFile /etc/apache2/webdav_credentials
        Require valid-user

        # Allow WebDAV methods (PUT, DELETE, MKCOL, etc.)
        <LimitExcept GET POST>
            Require valid-user
        </LimitExcept>

        # Logs for error and access
        ErrorLog /dev/stdout
        CustomLog /dev/stdout combined

        # Allow write access to user and group
        <IfModule mod_dav.c>
            Dav On
            DavDepthInfinity on
        </IfModule>
    </Directory>

    # Lock database for WebDAV locks
    DavLockDB /var/www/webdav/DavLock

    # Enable large file uploads
    LimitRequestBody 262144000  # 250MB

</VirtualHost>
